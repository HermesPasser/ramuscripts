<!doctype html>
<html>
	<head>
		<title></title>
	</head>
	
	<body>
		<script type="text/javascript" src="../ramu-0.7c2.js"></script>
		<script type="text/javascript">
			"use strict"
			
			Ramu.restoreAfter = function (func) {
				if (!Ramu.ctx)
					return
				Ramu.ctx.save()
				func()
				Ramu.ctx.restore()
			}
			
		</script>
		<script src="menuitem.js" type="text/javascript"></script>
		<script src="menuparams.js" type="text/javascript"></script>
		<script src="menu.js" type="text/javascript"></script>
		<script src="menumgr.js" type="text/javascript"></script>
		<script type="text/javascript">
		
Ramu.init()
MenuParams.default.img = Ramu.Utils.getImage('skin.png')

const text = new Ramu.Text("oi", 1, 150, 100, 30)

const mgr = new MenuManager()

const m = new Menu(new Rect(10, 10, 250, 100), 2, 3) // size < 20 quebra (joga exceção)

m.setAll('black', 'red', 'inactive', 'submenu', 'blue', 'yellow')
m.get(2).active = false
m.pack()

mgr.push(m)

const subm = new Menu(new Rect(25, 25, 150, 50), 2, 3)
subm.setAll('white', 'voltar')
subm.pack()

subm.onCommandFunc = (item) => {
	// chamando uma vez mesmo quando não cliquei
	if (item.text == 'voltar') {
		console.log(item.text)
		subm.close()
		
	} else {
		text.text = item.text + ' selecionado'
		MenuParams.default.itemText = item.text
	}

}

m.onCommandFunc = subm.onCommandFunc
m.setChildMenu('submenu', subm)

		</script>
	</body>
</html> 
